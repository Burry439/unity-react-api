(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(9),r=a.n(c),o=(a(70),a(3)),s=a(4),i=a.n(s),u=a(10),m=a(16),p="dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?{API_URL:"https://unity-react-games.herokuapp.com",MULTIPLAYER_GAME_URL:"https://online-game-iframe.herokuapp.com",SINGLEPLAYER_GAME_URL:"https://single-player-games-iframe.herokuapp.com"}:{API_URL:"http://localhost:8080",MULTIPLAYER_GAME_URL:"http://localhost:7000",SINGLEPLAYER_GAME_URL:"http://localhost:8000"},d=Object(m.a)({},p),E=Object(n.createContext)(),g=JSON.parse(localStorage.getItem("jwt"))||{id:null,username:"",accessToken:"",challenges:null,tickets:null},f=function(e){var t=Object(n.useState)(g),a=Object(o.a)(t,2),c=a[0],r=a[1],s=function(e){localStorage.removeItem("jwt"),localStorage.setItem("jwt",JSON.stringify(e)),r(e)},m=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.API_URL,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,l={id:n.user._id,username:n.user.username,accessToken:n.accessToken,challenges:n.user.completedChallenges,tickets:n.user.tickets},s(l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.API_URL,"/users/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,console.log(n),l={id:n.user._id,username:n.user.username,accessToken:n.accessToken,challenges:n.user.completedChallenges,tickets:n.user.tickets},s(l);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(E.Provider,{value:{user:c,login:m,signout:function(){localStorage.removeItem("jwt"),r({id:null,username:"",accessToken:"",challenges:null,tickets:null})},signup:p,setUserInfo:s}},e.children)},h=a(13),y=(a(72),function(e){var t=e.game,a=Object(h.f)(),c=Object(n.useContext)(E).user;return console.log(t),Object(n.useEffect)((function(){c.id||a.push("/home")}),[c]),l.a.createElement("div",{id:"unity-body"},l.a.createElement("iframe",{className:"unity-player",src:t}))}),v=a(22),b=a.n(v),O=a(23),P=function(e){var t=null,a=e.location.state.gamePath,c=d.SINGLEPLAYER_GAME_URL,r=a.replace(/\//g,""),s=Object(n.useContext)(E),i=s.user,u=s.setUserInfo,m=Object(n.useState)(!1),p=Object(o.a)(m,2),g=p[0],f=p[1],h=Object(n.useState)(!1),v=Object(o.a)(h,2),P=v[0],L=v[1],j=Object(O.useToasts)().addToast;return Object(n.useEffect)((function(){if(t=b()(d.SINGLEPLAYER_GAME_URL),console.log("config.SINGLEPLAYER_GAME_URL ",d.SINGLEPLAYER_GAME_URL),console.log("gameUrl ",c),t)return t.on("connect",(function(){console.log("connetion"),t.emit("ReactConnected",{userId:i.id,gameName:r})})),t.on("gameReady",(function(){f(!0)})),t.on("isDuplicate",(function(){L(!0),f(!0)})),t.on("challengeCompleted",(function(e){console.log(e),i.challenges.push(e),i.tickets+=e.reward,u(i),j("good job you completed challenge: "+e.challengeName,{appearance:"success"})})),function(){console.log("in return"),t.close()}}),[]),g?P?l.a.createElement("div",null,"Looks Like YOu Have This Open In another Tab"):l.a.createElement(y,{game:c+a}):l.a.createElement("div",null,"Loading...")},L=a(63),j=function(e,t){switch(t.type){case"START_GAME":return console.log(t),{playerId:t.data.thisPlayerId,isDuplicate:!1,allPlayers:t.data.allPlayers};case"SET_PLAYER_AS_DUPLICATE":return console.log("SET_PLAYER_AS_DUPLICATE",t),{playerId:t.playerId,isDuplicate:!0,allPlayers:[]};case"ADD_NEW_PLAYER":return console.log("ADD_NEW_PLAYER",t),{playerId:e.playerId,isDuplicate:e.isDuplicate,allPlayers:[].concat(Object(L.a)(e.allPlayers),[t.newPlayer])};case"REMOVE_PLAYER":return console.log("REMOVE_PLAYER",t),{playerId:e.playerId,isDuplicate:e.isDuplicate,allPlayers:e.allPlayers.filter((function(e){return e.id!=t.removedPlayerID}))};case"CLEAR_ALL_PLAYERS":return console.log("CLEAR_ALL_PLAYERS",t),{thisPlayerId:"",allPlayers:[],isDuplicate:!1};case"SET_ALL_PLAYERS":return console.log("set all players",t.allPlayers),Object(m.a)(Object(m.a)({},e),{},{allPlayers:t.allPlayers});default:return e}},_=Object(n.createContext)(),A=function(e){var t=Object(n.useReducer)(j,{thisPlayerId:"",isDuplicate:!1,allPlayers:[]}),a=Object(o.a)(t,2),c=a[0],r=a[1];return l.a.createElement(_.Provider,{value:{game:c,gameDispatch:r}},e.children)},S=(a(112),function(e){var t=Object(n.useContext)(E).user,a=Object(n.useContext)(_),c=a.game,r=a.gameDispatch,s=null,i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],p=u[1];return Object(n.useEffect)((function(){if(console.log("in use effect"),s=b()(d.MULTIPLAYER_GAME_URL))return s.on("connect",(function(){console.log("connetion")})),s.emit("addReactUser",t),s.on("reactFirstSpawn",(function(e){console.log("reactFirstSpawn"),r({type:"START_GAME",data:e}),p(!0)})),s.on("duplicatePlayer",(function(e){console.log("duplicatePlayer"),r({type:"SET_PLAYER_AS_DUPLICATE",playerId:e}),p(!0)})),s.on("reactSpawn",(function(e){console.log("reactSpawn"),r({type:"ADD_NEW_PLAYER",newPlayer:e})})),s.on("disconnectFromReact",(function(e){console.log("in disconnectFromReact",e),c.isDuplicate||r({type:"REMOVE_PLAYER",removedPlayerID:e})})),function(){console.log("in return"),r({type:"CLEAR_ALL_PLAYERS"}),s.close()}}),[]),m?c.isDuplicate?l.a.createElement("div",null,"Looks like you have this opened in anoyher tab try closing and refreshing the page"):l.a.createElement(y,{game:d.MULTIPLAYER_GAME_URL}):l.a.createElement("div",null,"Loading...")}),R=(a(113),function(){var e=Object(n.useContext)(E).user,t=Object(h.f)();return Object(n.useEffect)((function(){e.id||(console.log("no user"),t.push("/home"))}),[e]),e.id?l.a.createElement("div",null,l.a.createElement("h1",null,"Welcome ",e.username),l.a.createElement("div",null,l.a.createElement("h2",null,"Completed Challenges"),l.a.createElement("ul",null,e.challenges.map((function(e){return l.a.createElement("li",{className:"challenges",key:e._id},"challenge name: ",e.challengeName)}))),l.a.createElement("h3",null,"Total Tickets: ",e.tickets))):l.a.createElement("div",null)}),C=a(17),T=(a(114),Object(n.createContext)()),x={isShowModal:!1,component:""},N=function(e){var t=Object(n.useState)(x),a=Object(o.a)(t,2),c=a[0],r=a[1];return l.a.createElement(T.Provider,{value:{modal:c,openModal:function(e){r({isShowModal:!0,component:e})},closeModal:function(){r({isShowModal:!1,component:""})}}},e.children)},k=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),m=s[0],p=s[1],d=Object(n.useContext)(E).login,g=Object(n.useContext)(T).closeModal,f=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:a,password:m},e.next=4,d(n);case 4:g();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("form",{onSubmit:f},l.a.createElement("input",{type:"text",placeholder:"username",required:!0,value:a,onChange:function(e){return c(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"password",required:!0,value:m,onChange:function(e){return p(e.target.value)}}),l.a.createElement("input",{type:"submit",value:"Login"}))},I=function(e){var t=e.title,a=e.details,c=e.gameType,r=e.gameName,o=e.gamePath,s=Object(n.useContext)(E).user,i=Object(n.useContext)(T).openModal,u=Object(h.f)();return l.a.createElement("div",{className:"game-details"},l.a.createElement("div",{className:"game-details-image-container"},l.a.createElement("img",{src:"https://images.unsplash.com/photo-1589289959525-b5b685332c7f?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1200&q=80",alt:"none"})),l.a.createElement("div",{className:"game-details-content"},l.a.createElement("p",{className:"game-details-title text-medium"},t),l.a.createElement("div",{className:"game-details-info"},l.a.createElement("p",{className:"text-medium"},a),s.id?l.a.createElement("p",{className:"game-details-play text-medium",onClick:function(){u.push({pathname:"".concat(c),state:{gameName:r,gamePath:o}})}},"Play"):l.a.createElement("p",{className:"game-details-play text-medium",onClick:function(){return i(k)}},"Log In to Play"))))},w=(a(115),function(){var e;return l.a.createElement("div",{className:"game-list-container"},l.a.createElement("section",{className:"game-list"},l.a.createElement(I,(e={title:"online game",details:"its a mulitplayer game",gameType:"/mulitPlayerGame"},Object(C.a)(e,"gameType","/mulitPlayerGame"),Object(C.a)(e,"gameName","onlineGame"),e)),l.a.createElement(I,{title:"Stick game",details:"its a single player game",gameType:"/singlePlayerGame/",gamePath:"/stickGame",gameName:"stick adventure demo"}),l.a.createElement(I,{title:"Cube game",details:"its a single player game",gameType:"/singlePlayerGame/",gamePath:"/cubeGame",gameName:"Cube Game Demo"})))}),D=(a(116),function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"top-section"},l.a.createElement("h1",null,"Select a Game")),l.a.createElement("div",{className:"game-list-section"},l.a.createElement(w,null)))}),M=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),m=s[0],p=s[1],d=Object(n.useState)(""),g=Object(o.a)(d,2),f=g[0],h=g[1],y=Object(n.useContext)(E),v=y.signup,b=(y.test,Object(n.useContext)(T).closeModal),O=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:a,password:f,email:m},e.next=4,v(n);case 4:b();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("form",{onSubmit:O},l.a.createElement("input",{type:"text",placeholder:"username",required:!0,value:a,onChange:function(e){return c(e.target.value)}}),l.a.createElement("input",{type:"email",placeholder:"email",required:!0,value:m,onChange:function(e){return p(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"password",required:!0,value:f,onChange:function(e){return h(e.target.value)}}),l.a.createElement("input",{type:"submit",value:"Sign up"}))},G=a(12),U=(a(117),a(62)),Y=a.n(U),W=function(){var e=Object(n.useContext)(T).openModal,t=Object(n.useContext)(E),a=t.user,c=t.signout;return l.a.createElement("header",null,l.a.createElement(G.b,{className:"logo-container",to:"/"},l.a.createElement("img",{className:"logo",src:Y.a,alt:"Logo"})),l.a.createElement("nav",null,a.id?l.a.createElement("ul",{className:"nav-links"},l.a.createElement("li",{onClick:function(){return c()}},l.a.createElement("a",null),"Signout"),l.a.createElement("li",null," ",l.a.createElement(G.b,{to:"/profile"},"Profile"))):l.a.createElement("ul",{className:"nav-links"},l.a.createElement("li",{onClick:function(){return e(M)}},l.a.createElement("a",null),"Sign Up"),l.a.createElement("li",{onClick:function(){return e(k)}},l.a.createElement("a",null),"Login"))))},q=a(37),J=a.n(q);J.a.setAppElement("#root");var F=function(){var e=Object(n.useContext)(T),t=e.modal,a=e.closeModal;return l.a.createElement("div",null,l.a.createElement(J.a,{w:!0,style:{overlay:{borderColor:"grey"},content:{maxWidth:"100%",top:"50px",left:"50px",right:"50px",bottom:"50px"}},isOpen:t.isShowModal,onRequestClose:function(){return a()}},l.a.createElement(l.a.Fragment,null,""!=t.component?l.a.createElement(t.component,null):l.a.createElement(l.a.Fragment,null)),l.a.createElement("button",{onClick:function(){return a()}})))};var B=function(){return console.log(d),l.a.createElement(G.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(O.ToastProvider,{autoDismissTimeout:3e3},l.a.createElement(N,null,l.a.createElement(f,null,l.a.createElement(A,null,l.a.createElement(W,null),l.a.createElement(F,null),l.a.createElement(h.c,null,l.a.createElement(h.a,{path:"/",exact:!0,component:D}),l.a.createElement(h.a,{path:"/mulitPlayerGame",exact:!0,component:S}),l.a.createElement(h.a,{path:"/singlePlayerGame",component:P}),l.a.createElement(h.a,{path:"/profile",exact:!0,component:R}),l.a.createElement(h.a,{component:D}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(127);r.a.render(l.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){e.exports=a.p+"static/media/logo.3fa434f6.png"},65:function(e,t,a){e.exports=a(128)},70:function(e,t,a){},72:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.459bb00b.chunk.js.map