(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{124:function(e,t){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},145:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),s=(a(89),a(5)),o=a(3),i=a.n(o),u=a(6),m=a(16),p={API_URL:"https://unity-react-games.herokuapp.com",MULTIPLAYER_GAME_URL:"https://online-game-iframe.herokuapp.com",SINGLEPLAYER_GAME_URL:"https://single-player-games-iframe.herokuapp.com"},d=Object(m.a)({},p),f=Object(n.createContext)(),g={id:null,username:"",accessToken:"",challenges:null,tickets:null},E=function(e){var t=Object(n.useState)(JSON.parse(localStorage.getItem("jwt"))||g),a=Object(s.a)(t,2),c=a[0],l=a[1],o=function(e){var t={id:void 0==e.user._id?e.user.id:e.user._id,username:e.user.username,accessToken:e.accessToken,challenges:e.user.completedChallenges,tickets:e.user.tickets};localStorage.removeItem("jwt"),localStorage.setItem("jwt",JSON.stringify(t)),l(t)},m=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(404!==t.status){e.next=7;break}return console.log("here"),e.next=4,t.text();case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,t.json();case 9:return a=e.sent,o(a),e.abrupt("return","success");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.API_URL,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,m(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.API_URL,"/users/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,m(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(f.Provider,{value:{user:c,login:p,signout:function(){localStorage.removeItem("jwt"),l(g)},signup:E,setUserInfo:o}},e.children)},h=a(19),b=(a(91),function(e){var t=e.game,a=Object(h.f)(),c=Object(n.useContext)(f).user;return console.log(t),Object(n.useEffect)((function(){c.id||a.push("/home")}),[c]),r.a.createElement("div",{id:"unity-body"},r.a.createElement("iframe",{className:"unity-player",src:t}))}),v=a(28),y=a.n(v),O=a(29),j=function(e){var t=null;console.log(e.location.state.gamePath);var a=e.location.state.gamePath,c=d.SINGLEPLAYER_GAME_URL,l=a.replace(/\//g,""),o=Object(n.useContext)(f),i=o.user,u=o.setUserInfo,m=Object(n.useState)(!1),p=Object(s.a)(m,2),g=p[0],E=p[1],h=Object(n.useState)(!1),v=Object(s.a)(h,2),j=v[0],P=v[1],w=Object(O.useToasts)().addToast;return Object(n.useEffect)((function(){if(t=y()(d.SINGLEPLAYER_GAME_URL),console.log("config.SINGLEPLAYER_GAME_URL ",d.SINGLEPLAYER_GAME_URL),console.log("gameUrl ",c),t)return t.on("connect",(function(){console.log("connetion"),t.emit("ReactConnected",{userId:i.id,gameName:l})})),t.on("gameReady",(function(){E(!0)})),t.on("isDuplicate",(function(){P(!0),E(!0)})),t.on("challengeCompleted",(function(e){console.log(e),i.challenges.push(e),i.tickets+=e.reward,u(i),w("good job you completed challenge: "+e.challengeName,{appearance:"success"})})),function(){console.log("in return"),t.close()}}),[]),g?j?r.a.createElement("div",null,"Looks Like YOu Have This Open In another Tab"):r.a.createElement(b,{game:c+a+"/?".concat(i.id)}):r.a.createElement("div",null,"Loading...")},P=a(8),w=function(e,t){switch(t.type){case"START_GAME":return console.log(t),{playerId:t.data.thisPlayerId,isDuplicate:!1,allPlayers:t.data.allPlayers};case"SET_PLAYER_AS_DUPLICATE":return console.log("SET_PLAYER_AS_DUPLICATE",t),{playerId:t.playerId,isDuplicate:!0,allPlayers:[]};case"ADD_NEW_PLAYER":return console.log("ADD_NEW_PLAYER",t),{playerId:e.playerId,isDuplicate:e.isDuplicate,allPlayers:[].concat(Object(P.a)(e.allPlayers),[t.newPlayer])};case"REMOVE_PLAYER":return console.log("REMOVE_PLAYER",t),{playerId:e.playerId,isDuplicate:e.isDuplicate,allPlayers:e.allPlayers.filter((function(e){return e.id!=t.removedPlayerID}))};case"CLEAR_ALL_PLAYERS":return console.log("CLEAR_ALL_PLAYERS",t),{thisPlayerId:"",allPlayers:[],isDuplicate:!1};case"SET_ALL_PLAYERS":return console.log("set all players",t.allPlayers),Object(m.a)(Object(m.a)({},e),{},{allPlayers:t.allPlayers});default:return e}},L=Object(n.createContext)(),A=function(e){var t=Object(n.useReducer)(w,{thisPlayerId:"",isDuplicate:!1,allPlayers:[]}),a=Object(s.a)(t,2),c=a[0],l=a[1];return r.a.createElement(L.Provider,{value:{game:c,gameDispatch:l}},e.children)},N=(a(131),function(e){var t=Object(n.useContext)(f).user,a=Object(n.useContext)(L),c=a.game,l=a.gameDispatch,o=null,i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],p=u[1];return Object(n.useEffect)((function(){if(console.log("in use effect"),o=y()(d.MULTIPLAYER_GAME_URL))return o.on("connect",(function(){console.log("connetion")})),o.emit("addReactUser",t),o.on("reactFirstSpawn",(function(e){console.log("reactFirstSpawn"),l({type:"START_GAME",data:e}),p(!0)})),o.on("duplicatePlayer",(function(e){console.log("duplicatePlayer"),l({type:"SET_PLAYER_AS_DUPLICATE",playerId:e}),p(!0)})),o.on("reactSpawn",(function(e){console.log("reactSpawn"),l({type:"ADD_NEW_PLAYER",newPlayer:e})})),o.on("disconnectFromReact",(function(e){console.log("in disconnectFromReact",e),c.isDuplicate||l({type:"REMOVE_PLAYER",removedPlayerID:e})})),function(){console.log("in return"),l({type:"CLEAR_ALL_PLAYERS"}),o.close()}}),[]),m?c.isDuplicate?r.a.createElement("div",null,"Looks like you have this opened in anoyher tab try closing and refreshing the page"):r.a.createElement(b,{game:d.MULTIPLAYER_GAME_URL}):r.a.createElement("div",null,"Loading...")}),S=(a(132),function(){var e=Object(n.useContext)(f).user,t=Object(h.f)();return Object(n.useEffect)((function(){e.id||(console.log("no user"),t.push("/home"))}),[e]),e.id?r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",e.username),r.a.createElement("div",null,r.a.createElement("h2",null,"Completed Challenges"),r.a.createElement("ul",null,e.challenges.map((function(e){return r.a.createElement("li",{className:"challenges",key:e._id},"challenge name: ",e.challengeName)}))),r.a.createElement("h3",null,"Total Tickets: ",e.tickets))):r.a.createElement("div",null)}),_=a(7),R=(a(133),Object(n.createContext)()),x={isShowModal:!1,component:""},k=function(e){var t=Object(n.useState)(x),a=Object(s.a)(t,2),c=a[0],l=a[1];return r.a.createElement(R.Provider,{value:{modal:c,openModal:function(e){l({isShowModal:!0,component:e})},closeModal:function(){l({isShowModal:!1,component:""})}}},e.children)},C=a(34),I=function(){var e=Object(n.useContext)(f).login,t=Object(n.useContext)(R).closeModal,a=Object(C.a)(),c=a.handleSubmit,l=a.register,o=Object(n.useState)({message:"",class:"hide"}),p=Object(s.a)(o,2),d=p[0],g=p[1],E=function(){var a=Object(u.a)(i.a.mark((function a(n){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(n);case 2:"success"==(r=a.sent)?t():(g({message:r,class:"show"}),setTimeout((function(){g((function(e){return Object(m.a)(Object(m.a)({},e),{},{class:"hide"})}))}),3e3));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:c(E)},r.a.createElement("input",{className:"form-control",id:"",name:"username",type:"text",placeholder:"please enter a username",ref:l()}),r.a.createElement("input",{className:"form-control",name:"password",type:"password",placeholder:"please enter a password",ref:l()}),r.a.createElement("input",{className:"form-control btn btn-primary",type:"submit",value:"Log In"}),r.a.createElement("div",{className:"error-message-container"},r.a.createElement("div",{className:"error-message "+d.class},d.message)))},T=function(e){var t=e.title,a=e.details,c=e.gameType,l=e.gameName,s=e.gamePath,o=Object(n.useContext)(f).user,i=Object(n.useContext)(R).openModal,u=Object(h.f)();return r.a.createElement("div",{className:"game-details"},r.a.createElement("div",{className:"game-details-image-container"},r.a.createElement("img",{src:"https://images.unsplash.com/photo-1589289959525-b5b685332c7f?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1200&q=80",alt:"none"})),r.a.createElement("div",{className:"game-details-content"},r.a.createElement("p",{className:"game-details-title text-medium"},t),r.a.createElement("div",{className:"game-details-info"},r.a.createElement("p",{className:"text-medium"},a),o.id?r.a.createElement("p",{className:"game-details-play text-medium",onClick:function(){u.push({pathname:"".concat(c),state:{gameName:l,gamePath:s}})}},"Play"):r.a.createElement("p",{className:"game-details-play text-medium",onClick:function(){return i(I)}},"Log In to Play"))))},M=(a(134),function(){var e;return r.a.createElement("div",{className:"game-list-container"},r.a.createElement("section",{className:"game-list"},r.a.createElement(T,(e={title:"online game",details:"its a mulitplayer game",gameType:"/mulitPlayerGame"},Object(_.a)(e,"gameType","/mulitPlayerGame"),Object(_.a)(e,"gameName","onlineGame"),e)),r.a.createElement(T,{title:"Stick game",details:"its a single player game",gameType:"/singlePlayerGame/",gamePath:"/stickGame",gameName:"stick adventure demo"}),r.a.createElement(T,{title:"Cube game",details:"its a single player game",gameType:"/singlePlayerGame/",gamePath:"/cubeGame",gameName:"Cube Game Demo"})))}),D=(a(135),function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"top-section"},r.a.createElement("h1",null,"Select a Game")),r.a.createElement("div",{className:"game-list-section"},r.a.createElement(M,null)))}),G=(a(136),function(){var e=Object(n.useContext)(f).signup,t=Object(n.useContext)(R).closeModal,a=Object(C.a)(),c=a.handleSubmit,l=a.register,o=a.errors,p=a.watch,d=Object(n.useState)({message:"",class:"hide"}),g=Object(s.a)(d,2),E=g[0],h=g[1],b=Object(n.useRef)({});b.current=p("password","");var v=function(){var a=Object(u.a)(i.a.mark((function a(n){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(n);case 2:"success"==(r=a.sent)?t():(h({message:r,class:"show"}),setTimeout((function(){h((function(e){return Object(m.a)(Object(m.a)({},e),{},{class:"hide"})}))}),3e3));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:c(v)},r.a.createElement("input",{className:"form-control",id:"",name:"username",type:"text",placeholder:"please enter a username",ref:l({required:"please enter a username",minLength:{value:5,message:"username must have at least 5 characters"}})}),o.username&&r.a.createElement("div",{className:"invalid-input-message"},o.username.message),r.a.createElement("input",{className:"form-control",name:"email",type:"email",placeholder:"please enter a email",ref:l({required:"please enter a valid email address",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"invalid email address"}})}),o.email&&r.a.createElement("div",{className:"invalid-input-message"},o.email.message),r.a.createElement("input",{className:"form-control",name:"password",type:"password",placeholder:"please enter a password",ref:l({required:"this is required",minLength:{value:5,message:"Password must have at least 5 characters"}})}),o.password&&r.a.createElement("div",{className:"invalid-input-message"},o.password.message),r.a.createElement("input",{className:"form-control",name:"password_repeat",type:"password",placeholder:"please confirm pasword",ref:l({validate:function(e){return e===b.current||"The passwords do not match"}})}),o.password_repeat&&r.a.createElement("div",{className:"invalid-input-message"},o.password_repeat.message),r.a.createElement("input",{className:"form-control btn btn-primary",type:"submit",value:"Sign up"}),r.a.createElement("div",{className:"error-message-container"},r.a.createElement("div",{className:"error-message "+E.class},E.message)))}),U=a(18),Y=(a(137),a(77)),J=a.n(Y),W=function(){var e=Object(n.useContext)(R).openModal,t=Object(n.useContext)(f),a=t.user,c=t.signout;return r.a.createElement("header",null,r.a.createElement(U.b,{className:"logo-container",to:"/"},r.a.createElement("img",{className:"logo",src:J.a,alt:"Logo"})),r.a.createElement("nav",null,a.id?r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",{onClick:function(){return c()}},r.a.createElement("a",null),"Signout"),r.a.createElement("li",null," ",r.a.createElement(U.b,{to:"/profile"},"Profile"))):r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",{onClick:function(){return e(G)}},r.a.createElement("a",null),"Sign Up"),r.a.createElement("li",{onClick:function(){return e(I)}},r.a.createElement("a",null),"Login"))))},q=a(50),F=a.n(q);a(145);F.a.setAppElement("#root");var H=function(){var e=Object(n.useContext)(R),t=e.modal,a=e.closeModal;return r.a.createElement("div",null,r.a.createElement(F.a,{style:{overlay:{borderColor:"grey"},content:{height:"fit-content",width:"fit-content",position:"fixed",margin:"5% auto",left:"0",right:"0",padding:"15px"}},isOpen:t.isShowModal,onRequestClose:function(){return a()}},r.a.createElement("div",{className:"close-button-container"},r.a.createElement("div",{className:"close-button",onClick:function(){return a()}},"X")),r.a.createElement(r.a.Fragment,null,""!=t.component?r.a.createElement(t.component,null):r.a.createElement(r.a.Fragment,null))))},K=(a(73),a(153)),B=a(152),V=a(78),Z=function(e){return console.log(e),r.a.createElement(V.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,e.tableHeaders.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,e.tableRows.map((function(e,t){return r.a.createElement("tr",{key:t},Object.keys(e).map((function(t){return e[t],r.a.createElement("td",{key:e[t].toString()},e[t].toString())})))}))))},$=function(){var e=Object(n.useState)({headers:[],rows:[]}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=function(e){var t=Object.keys(e[0]);c({rows:e,headers:t})},o=function(){var e=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.API_URL,"/").concat(t,"/get").concat(t,"s"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,l(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o("user")}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(K.a,{defaultActiveKey:"challenges",id:"uncontrolled-tab-example"},r.a.createElement(B.a,{eventKey:"challenges",title:"challenge",onSelect:function(){return o("challenge")}},r.a.createElement(Z,{tableHeaders:a.headers,tableRows:a.rows})),r.a.createElement(B.a,{eventKey:"users",title:"user",onSelect:function(){return o("user")}},r.a.createElement(Z,{tableHeaders:a.headers,tableRows:a.rows})),r.a.createElement(B.a,{ref:"games",eventKey:"games",title:"game",onSelect:function(){return o("game")}},r.a.createElement(Z,{tableHeaders:a.headers,tableRows:a.rows}))))};var Q=function(){return console.log(d),r.a.createElement(U.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(O.ToastProvider,{autoDismissTimeout:3e3},r.a.createElement(k,null,r.a.createElement(E,null,r.a.createElement(A,null,r.a.createElement(W,null),r.a.createElement(H,null),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0,component:D}),r.a.createElement(h.a,{path:"/mulitPlayerGame",exact:!0,component:N}),r.a.createElement(h.a,{path:"/singlePlayerGame",component:j}),r.a.createElement(h.a,{path:"/profile",exact:!0,component:S}),r.a.createElement(h.a,{path:"/admin",exact:!0,component:$}),r.a.createElement(h.a,{component:D}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){e.exports=a.p+"static/media/logo.3fa434f6.png"},84:function(e,t,a){e.exports=a(149)},89:function(e,t,a){},91:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.7d837608.chunk.js.map